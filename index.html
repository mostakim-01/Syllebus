<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Happy Birthday ‚Äî Shuvo üéâ</title>
<meta name="theme-color" content="#ff9a9e"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#ff9a9e; --bg2:#fad0c4; --accent:#ff4b2b; --muted:#666;
    --card-bg:#fff; --card-radius:16px;
  }
  *{box-sizing:border-box;font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,Arial;}
  html,body{height:100%;margin:0;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:#111;overflow-x:hidden;}
  body{transition:background 8s ease infinite;}
  .wrap{max-width:480px;margin:18px auto;padding:14px;}
  .card{background:var(--card-bg);border-radius:var(--card-radius);box-shadow:0 10px 30px rgba(10,20,40,0.12);overflow:hidden;margin-bottom:16px;position:relative;transition:transform 0.3s;}
  .card:hover{transform:scale(1.02);}
  .pad{padding:18px;}
  h1{font-size:22px;margin:0 0 6px;color:var(--accent);letter-spacing:0.2px;}
  p.lead{margin:0 0 12px;color:var(--muted);font-size:14px;line-height:1.4;}
  .btn{display:inline-block;padding:10px 16px;border-radius:12px;background:var(--accent);color:#fff;text-decoration:none;border:none;font-weight:600;cursor:pointer;transition:0.3s;}
  .btn:hover{transform:scale(1.05);}
  .btn.ghost{background:#fff;color:var(--accent);border:1px solid #f1b1a6;}
  .center{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
  #memoryGrid{display:flex;flex-direction:column;gap:12px;padding:8px;}
  .memory{background:linear-gradient(180deg,#fff,#fff);border-radius:12px;overflow:hidden;display:block;transform-origin:center;transition:transform .28s ease,opacity .28s ease;opacity:0;transform:translateY(10px) scale(.995);}
  .memory.show{opacity:1;transform:translateY(0) scale(1);}
  .memory img{width:100%;height:200px;object-fit:cover;background:#f4f6f8;display:block;}
  .mem-body{padding:10px;}
  .mem-title{font-weight:700;color:var(--accent);font-size:15px;margin-bottom:6px;}
  .mem-text{font-size:14px;color:#333;line-height:1.35;margin-bottom:8px;}
  .mem-meta{display:flex;justify-content:space-between;align-items:center;gap:8px;}
  .reactions{display:flex;gap:8px;}
  .react{padding:6px 8px;border-radius:999px;background:#f6f7fb;border:1px solid #eee;cursor:pointer;display:flex;align-items:center;gap:6px;font-size:13px;position:relative;}
  .react span.count{font-weight:700;color:#333;}
  textarea{width:100%;min-height:80px;padding:10px;border-radius:10px;border:1px solid #eee;font-size:14px;resize:vertical;}
  input.small{padding:8px;border-radius:10px;border:1px solid #eee;width:100%;}
  .hint{font-size:12px;color:var(--muted);margin-top:6px;}
  .balloon{position:fixed;bottom:-140px;width:36px;height:46px;border-radius:50%;pointer-events:auto;display:flex;align-items:center;justify-content:center;z-index:40;animation:sway 3s ease-in-out infinite alternate;}
  .balloon::after{content:'';position:absolute;left:50%;bottom:-22px;width:2px;height:26px;background:rgba(0,0,0,0.08);transform:translateX(-50%);}
  @keyframes sway{0%{transform:translateX(0);}100%{transform:translateX(6px);}}
  #confetti{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:5;}
  .json-area{width:100%;height:120px;font-family:monospace;font-size:13px;padding:8px;border-radius:8px;border:1px dashed #e6e6e6;resize:vertical;}
  .footer{font-size:12px;color:var(--muted);text-align:center;padding:10px;}
  @media(max-width:480px){.wrap{padding:12px;margin:8px auto}.mem-body{padding:8px}.memory img{height:170px;}}
</style>
</head>
<body>
<canvas id="confetti"></canvas>
<div class="wrap">
  <div class="card pad" role="banner" aria-label="Happy Birthday header">
    <h1>üéâ Happy Birthday, Talha Jobayer Shuvo!</h1>
    <p class="lead">From your roommate ‚Äî Mostakim üíô<br>Two years of chaos, jokes, late-night walks, and steady help. This is for you.</p>
    <div class="center">
      <button class="btn" id="revealBtn">Reveal Surprise üéÅ</button>
      <button class="btn ghost" id="editToggle">Edit / Upload</button>
    </div>
    <p id="revealText" class="hint" style="margin-top:10px;font-weight:700"></p>
  </div>

  <div class="card pad" aria-live="polite">
    <h2 style="font-size:16px;margin:0 0 8px">Memories & Moments</h2>
    <div id="memoryGrid" aria-owns="memories"></div>
    <div style="margin-top:12px">
      <strong style="font-size:14px">Quick add a memory</strong>
      <textarea id="noteInput" placeholder="Write a memory ‚Äî like 'Late-night walks and endless gossip'"></textarea>
      <div style="display:flex;gap:8px;margin-top:10px">
        <input id="titleInput" class="small" placeholder="Short title (e.g. Sleepless Nights)" />
        <button class="btn" id="addBtn">Add</button>
      </div>
      <div class="hint">Tip: add emoji in text to make it lively. New memories appear at top.</div>
    </div>
  </div>

  <div class="card pad" id="editorCard" style="display:none">
    <strong>Bulk replace memories (JSON)</strong>
    <p class="hint">Paste an array of memory objects: [{ "img":"URL","title":"...","text":"..." }, ...]</p>
    <textarea id="jsonEditor" class="json-area" placeholder='[ { "img":"https://...", "title":"Late-night Walks","text":"..." } ]'></textarea>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button class="btn" id="applyJson">Apply</button>
      <button class="btn ghost" id="resetBtn">Reset to defaults</button>
    </div>
  </div>

  <div class="footer">Made with care ‚Ä¢ Editable ‚Ä¢ Replace placeholders anytime</div>
</div>

<script>
// ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî Balloon, Confetti & Memories Logic ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
const LS='hb_shuvo_all_v3';
const defaultMemories=[
  { img:'https://via.placeholder.com/800x520?text=Late-night+Walks', title:'Late-night Walks', text:'Walking under the night sky, gossiping till dawn üåô'},
  { img:'https://via.placeholder.com/800x520?text=Funny+Fights', title:'Playful Scuffles', text:'We fight, I hit him once or twice, but he laughs üòÜ'},
  { img:'https://via.placeholder.com/800x520?text=Helping+Hand', title:'Fixer-Up Bro', text:'He helps me through things I can‚Äôt solve üôè'}
];
let state={memories:[],revealed:false}; 
function loadState(){try{const r=localStorage.getItem(LS);if(r){state=JSON.parse(r);if(!state.memories||!state.memories.length)state.memories=defaultMemories.slice();}else{state.memories=defaultMemories.slice();}}catch(e){state.memories=defaultMemories.slice();} }
function saveState(){localStorage.setItem(LS,JSON.stringify(state)); }
function escapeHtml(s){return(s+'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));}
const grid=document.getElementById('memoryGrid');
function createMemoryElement(mem,idx){const el=document.createElement('article');el.className='memory';el.setAttribute('data-idx',idx);el.innerHTML=`<img loading="lazy" src="${mem.img}" alt="${escapeHtml(mem.title)}"><div class="mem-body"><div class="mem-title">${escapeHtml(mem.title)}</div><div class="mem-text">${escapeHtml(mem.text)}</div><div class="mem-meta"><div class="reactions" aria-hidden="false"><div class="react" data-emoji="‚ù§Ô∏è">‚ù§Ô∏è <span class="count">0</span></div><div class="react" data-emoji="üòÇ">üòÇ <span class="count">0</span></div><div class="react" data-emoji="üî•">üî• <span class="count">0</span></div></div><div style="font-size:12px;color:#999">Tap reactions</div></div></div>`; el.querySelectorAll('.react').forEach(btn=>{btn.addEventListener('click',e=>{e.stopPropagation();const emoji=btn.getAttribute('data-emoji');const counts=mem._reactions=mem._reactions||{'‚ù§Ô∏è':0,'üòÇ':0,'üî•':0};counts[emoji]=(counts[emoji]||0)+1;btn.querySelector('.count').innerText=counts[emoji];saveState();btn.animate([{transform:'scale(1)'},{transform:'scale(1.15)'},{transform:'scale(1)'}],{duration:220});});}); const counts=mem._reactions||{};el.querySelectorAll('.react').forEach(btn=>{const emoji=btn.getAttribute('data-emoji');btn.querySelector('.count').innerText=counts[emoji]||0;}); return el; }
function renderMemories(){grid.innerHTML='';state.memories.forEach((m,i)=>{const el=createMemoryElement(m,i);grid.appendChild(el);setTimeout(()=>el.classList.add('show'),80*i);});}
document.getElementById('addBtn').addEventListener('click',()=>{const txt=document.getElementById('noteInput').value.trim();const title=document.getElementById('titleInput').value.trim()||'New Memory';if(!txt){alert('Write a memory first.');return;}const mem={img:'https://via.placeholder.com/800x520?text=New+Memory',title:title,text:txt,_reactions:{}};state.memories.unshift(mem);saveState();renderMemories();document.getElementById('noteInput').value='';document.getElementById('titleInput').value='';});
loadState();renderMemories();

// Reveal Surprise
document.getElementById('revealBtn').addEventListener('click',()=>{if(state.revealed)return;state.revealed=true;saveState();document.getElementById('revealText').innerText='üéÅ Surprise! Check your desk drawer ‚Äî something special awaits!';burstConfetti(120);for(let i=0;i<8;i++)setTimeout(()=>spawnBalloon(true),i*200);});

// Confetti
const canvas=document.getElementById('confetti');const ctx=canvas.getContext('2d');let W=innerWidth,H=innerHeight;function resize(){W=innerWidth;H=innerHeight;canvas.width=W;canvas.height=H;}addEventListener('resize',()=>{resize();});resize();
let confettiParticles=[];function initConfetti(n=60){confettiParticles=[];const base=Math.max(18,Math.floor(n*(innerWidth/420)));for(let i=0;i<base;i++){confettiParticles.push({x:Math.random()*W,y:Math.random()*H,r:Math.random()*5+3,dx:(Math.random()-0.5)*1.2,dy:Math.random()*1.2+0.3,c:['#ff4b2b','#ff9a9e','#ffcd3c','#6be6ff','#9a4dff'][Math.floor(Math.random()*5)],rot:Math.random()*360});}};initConfetti(60);
function drawConfetti(){ctx.clearRect(0,0,W,H);confettiParticles.forEach(p=>{p.x+=p.dx;p.y+=p.dy;p.dy+=0.003;p.rot+=2;if(p.y>H+20){p.y=-10;p.x=Math.random()*W;p.dy=Math.random()*1+0.3;}ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.rot*Math.PI/180);ctx.fillStyle=p.c;ctx.beginPath();ctx.ellipse(0,0,p.r,p.r*0.6,0,0,Math.PI*2);ctx.fill();ctx.restore();});requestAnimationFrame(drawConfetti);}drawConfetti();
function burstConfetti(amount=80){const extra=[];for(let i=0;i<amount;i++){extra.push({x:Math.random()*W,y:Math.random()*H*0.6,r:Math.random()*5+3,dx:(Math.random()-0.5)*4,dy:(Math.random()*3)+0.5,c:['#ff4b2b','#ff9a9e','#ffcd3c','#6be6ff','#9a4dff'][Math.floor(Math.random()*5)],rot:Math.random()*360});}confettiParticles=confettiParticles.concat(extra);setTimeout(()=>{confettiParticles.splice(-amount);},2700);}
function spawnBalloon(fast=false){const b=document.createElement('div');b.className='balloon';const colors=['#ff7b6b','#ffd76b','#7be0ff','#cba0ff','#ff9ad8'];b.style.background=colors[Math.floor(Math.random()*colors.length)];b.style.left=(10+Math.random()*80)+'%';const duration=fast?(4+Math.random()*2):(9+Math.random()*6);b.style.transition=`transform ${duration}s linear, opacity 0.5s`;document.body.appendChild(b);requestAnimationFrame(()=>b.style.transform=`translateY(-${window.innerHeight+180}px)`);setTimeout(()=>{if(b.parentElement)b.remove();},(duration+0.6)*1000);}
</script>
</body>
</html>
